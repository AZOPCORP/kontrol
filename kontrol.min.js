(function(b){b.fn.fancyrange=function(){return this.each(function(){b(this).hide();var w=b(this).data("mode")||"normal",h=b(this).data("label")||"",c=!1,d=Number(b(this).prop("min")),q=Number(b(this).prop("max")),r=parseFloat(b(this).prop("step"))||1,p=0,g,u=r.toString().split(".")[1];void 0!==u&&(p=u.length);if("normal"==w){g=b(this);if(0>d){b('<div class="ctrlBar" ><div class="valBarminus"></div><div class="valBarplus"></div></div>').insertAfter(b(this));var e=b(this).next(),k=e.find(".valBarminus"),
l=e.find(".valBarplus"),f=function(a){a=100*(a-e.offset().left)/e.width();100<a&&(a=100);0>a&&(a=0);50>a?(a=50-a,k.css("width",a+"%"),l.css("width",0),a=(d*a/50).toFixed(p),g.val(a),e.attr("data-content",h+" "+a)):50<a?(a-=50,l.css("width",a+"%"),k.css("width",0),a=(q*a/50).toFixed(p),g.val(a),e.attr("data-content",h+" "+a)):50==a&&(l.css("width","1px"),k.css("width","1px"),g.val(0),e.attr("data-content",h+" 0"))};e.mousedown(function(a){a.preventDefault();c=!0;f(a.pageX);return!1});b(document).mouseup(function(a){a.preventDefault();
c&&(c=!1,f(a.pageX));return!1});b(document).mousemove(function(a){a.preventDefault();c&&f(a.pageX);return!1});e.on("touchstart",function(a){a.preventDefault();c=!0;f(a.originalEvent.touches[0].pageX);return!1});b(document).on("touchmove",function(a){a.preventDefault();c&&f(a.originalEvent.touches[0].pageX);return!1})}else{b('<div class="ctrlBar"><div class="valBar"></div></div>').insertAfter(b(this));var e=b(this).next(),m=e.find(".valBar"),f=function(a){a=100*(a-e.offset().left)/e.width();100<a&&
(a=100);0>a&&(a=0);m.css("width",a+"%");a=(q*a/100).toFixed(p);g.val(a);e.attr("data-content",h+" "+a)};e.mousedown(function(a){a.preventDefault();c=!0;f(a.pageX);return!1});b(document).mouseup(function(a){a.preventDefault();c&&(c=!1,f(a.pageX));return!1});b(document).mousemove(function(a){a.preventDefault();c&&f(a.pageX);return!1});e.on("touchstart",function(a){a.preventDefault();c=!0;f(a.originalEvent.touches[0].pageX);return!1});b(document).on("touchmove ",function(a){a.preventDefault();c&&f(a.originalEvent.touches[0].pageX);
return!1})}b(document).on("touchend ",function(a){a.preventDefault();c&&(c=!1,f(a.originalEvent.touches[0].pageX));return!1})}else"vertical"==w&&(g=b(this),0>d?(b('<div class="ctrlBar-vertical"><div class="valBarplus-vertical"></div><div class="valBarminus-vertical"></div></div>').insertAfter(b(this)),e=b(this).next(),k=e.find(".valBarminus-vertical"),l=e.find(".valBarplus-vertical"),f=function(a){a=100*(a-e.offset().top)/e.height();a=100-a;100<a&&(a=100);0>a&&(a=0);50>a?(a=50-a,k.css("height",a+
"%"),l.css("height",0),a=(d*a/50).toFixed(p),g.val(a),e.attr("data-content",h+" "+a)):50<a?(a-=50,l.css("height",a+"%"),k.css("height",0),a=(q*a/50).toFixed(p),g.val(a),e.attr("data-content",h+" "+a)):50==a&&(l.css("height","1px"),k.css("height","1px"),g.val(0),e.attr("data-content",h+" 0"))},e.mousedown(function(a){a.preventDefault();c=!0;f(a.pageY);return!1}),b(document).mouseup(function(a){a.preventDefault();c&&(c=!1,f(a.pageY));return!1}),b(document).mousemove(function(a){a.preventDefault();c&&
f(a.pageY);return!1}),e.on("touchstart",function(a){a.preventDefault();c=!0;f(a.originalEvent.touches[0].pageY);return!1}),b(document).on("touchmove",function(a){a.preventDefault();c&&f(a.originalEvent.touches[0].pageY);return!1}),b(document).on("touchend ",function(a){a.preventDefault();c&&(c=!1,f(a.originalEvent.touches[0].pageY));return!1})):(b('<div class="ctrlBar-vertical"><div class="valBar-vertical"></div></div>').insertAfter(b(this)),e=b(this).next(),m=e.find(".valBar-vertical"),f=function(a){a=
100*(a-e.offset().top)/e.height();a=100-a;100<a&&(a=100);0>a&&(a=0);m.css("height",a+"%");a=(q*a/100).toFixed(p);g.val(a);e.attr("data-content",h+" "+a)},e.mousedown(function(a){a.preventDefault();c=!0;f(a.pageY);return!1}),b(document).mouseup(function(a){a.preventDefault();c&&(c=!1,f(a.pageY));return!1}),b(document).mousemove(function(a){a.preventDefault();c&&f(a.pageY);return!1}),e.on("touchstart",function(a){a.preventDefault();c=!0;f(a.originalEvent.touches[0].pageY);return!1}),b(document).on("touchmove ",
function(a){a.preventDefault();c&&f(a.originalEvent.touches[0].pageY);return!1}),b(document).on("touchend ",function(a){a.preventDefault();c&&(c=!1,f(a.originalEvent.touches[0].pageY));return!1})));g.on("input change",function(){if("normal"==w)if(0>d){var a=Number(g.val());0>a?(a=a/d*50,k.css("width",a+"%"),l.css("width",0)):0<a?(a=a*q/200,l.css("width",a+"%"),k.css("width",0)):0===a&&(l.css("width","1px"),k.css("width","1px"))}else a=Number(g.val()),a=a/q*100,m.css("width",a+"%");else"vertical"==
w&&(0>d?(a=Number(g.val()),0>a?(a=a/d*50,k.css("height",a+"%"),l.css("height",0)):0<a?(a=50*a/q,l.css("height",a+"%"),k.css("height",0)):0===a&&(l.css("height","1px"),k.css("height","1px"))):(a=Number(g.val()),a=a/q*100,m.css("height",a+"%")));e.attr("data-content",h+" "+g.val())});b(this).trigger("change");b(this).next().bind("DOMMouseScroll",function(a){var b=Number(g.val());0<a.originalEvent.detail?(g.val(b-r),b<=d&&g.val(d)):(g.val(b+r),b>=q&&g.val(q));g.trigger("change");return!1});b(this).next().bind("mousewheel",
function(a){var b=Number(g.val());0>a.originalEvent.wheelDelta?(g.val(b-r),Number(b)<=d&&g.val(d)):(g.val(b+r),b>=q&&g.val(q));g.trigger("change");return!1})})};b.fn.fancyknob=function(w){return this.each(function(){function h(a,b,n){"up"==a?280>=d&&(n?(d+=10,c(b,!0)):(a=parseFloat(q.val())+e,a<=r?a=r:a>=p&&(a=p),q.val(a).trigger("change")),280<=d&&(d=280,c(b,!0))):"down"==a&&0<=d&&(n?(d-=10,c(b,!0)):(a=parseFloat(q.val())-e,a<=r?a=r:a>=p&&(a=p),q.val(a).trigger("change")),0>=d&&(d=0,c(b,!0)))}function c(a,
b){a.find(".knob").css({"-moz-transform":"rotate("+d+"deg)","-webkit-transform":"rotate("+d+"deg)","-o-transform":"rotate("+d+"deg)","-ms-transform":"rotate("+d+"deg)",transform:"rotate("+d+"deg)"});if(0>r)if(135>d){var n=Math.round(d/10),n=Math.abs(n-14);a.find(".tick").removeClass("activetick");for(var c=0;c<=n;c++)a.find(".tick:eq("+Math.round(14+c)+")").removeClass("activetick"),a.find(".tick:eq("+Math.round(14-c)+")").addClass("activetick")}else if(145<d)for(n=Math.round(d/10),n-=14,a.find(".tick").removeClass("activetick"),
c=0;c<=n;c++)a.find(".tick:eq("+Math.round(14-c)+")").removeClass("activetick"),a.find(".tick:eq("+Math.round(14+c)+")").addClass("activetick");else a.find(".tick").removeClass("activetick"),a.find(".tick:eq("+Math.round(14)+")").addClass("activetick");else n=Math.round(d/10)+1,a.find(".tick").removeClass("activetick"),a.find(".tick").slice(0,n).addClass("activetick"),0===d&&a.find(".tick").removeClass("activetick");b&&(0>r?140>d?(n=d/140*Math.abs(r),n=parseInt(r)+Math.abs(n)):n=140<d?d/140*p-parseInt(p):
0:n=d/280*p,a.prev().val(n.toFixed(x)),a.find(".knobvalue").html(n.toFixed(x)))}b(this).hide();b('<div class="knob-surround"><div class="knob"></div><div class="ticks"><div class="tick"></div><div class="tick"></div><div class="tick"></div><div class="tick"></div><div class="tick"></div><div class="tick"></div><div class="tick"></div><div class="tick"></div><div class="tick"></div><div class="tick"></div><div class="tick"></div><div class="tick"></div><div class="tick"></div><div class="tick"></div><div class="tick"></div><div class="tick"></div><div class="tick"></div><div class="tick"></div><div class="tick"></div><div class="tick"></div><div class="tick"></div><div class="tick"></div><div class="tick"></div><div class="tick"></div><div class="tick"></div><div class="tick"></div><div class="tick"></div><div class="tick"></div><div class="tick"></div></div><div class="knoblabel"></div><div class="knobvalue"></div></div>').insertAfter(b(this));
var d=0,q=b(this),r=parseFloat(b(this).prop("min")),p=parseFloat(b(this).prop("max")),g=b(this).next().find(".knob"),u=b(document),e=parseFloat(b(this).prop("step"))||1,k,l,f,m,a=180/Math.PI,t=-1,v=0,n=0,x=0,y=e.toString().split(".")[1];void 0!==y&&(x=y.length);b(this).next().find(".knoblabel").html(b(this).data("label"));b(this).on("input change",function(){b(this).next().find(".knobvalue").html(b(this).val());if(0>r)if(0>parseInt(b(this).val())){var a=Math.abs(r)+parseInt(b(this).val());d=Math.round(a/
p*280)/2}else a=parseInt(b(this).val()),d=140+Math.round(a/p*280)/2;else d=Math.round(b(this).val()/p*280);c(b(this).next(),!1)});b(this).next().bind("DOMMouseScroll",function(a){0<a.originalEvent.detail?h("down",b(this),!1):h("up",b(this),!1);return!1});b(this).next().bind("mousewheel",function(a){0>a.originalEvent.wheelDelta?h("down",b(this)):h("up",b(this));return!1});g.on("mousedown",function(a){a.preventDefault();a=b(this).offset();var f=a.top+g.height()/2,e=a.left+g.width()/2,k,l,m,h,p=180/
Math.PI;u.on("mousemove.rem ",function(a){k=f-a.pageY;l=e-a.pageX;m=Math.atan2(k,l)*p;0>m&&(m=360+m);-1==t&&(t=m);h=Math.floor(m-t+v);0>h?h=360+h:280<h&&(h%=360);if(180<Math.abs(h-n))return!1;d=h;280<d&&(d=280);c(g.parent(),!0);n=h});u.on("mouseup.rem",function(){g.off(".rem");u.off(".rem");v=0;t=-1})});g.on("touchstart",function(e){e.preventDefault();e=b(this).offset();var h=e.top+g.height()/2,p=e.left+g.width()/2;u.on("touchmove.rem ",function(b){k=h-b.originalEvent.touches[0].pageY;l=p-b.originalEvent.touches[0].pageX;
f=Math.atan2(k,l)*a;0>f&&(f=360+f);-1==t&&(t=f);m=Math.floor(f-t+v);0>m?m=360+m:280<m&&(m%=360);if(180<Math.abs(m-n))return!1;d=m;280<d&&(d=280);c(g.parent(),!0);n=m});u.on("touchend.rem",function(){g.off(".rem");u.off(".rem");v=0;t=-1})});b(this).trigger("change")})};b.fn.dualrange=function(w){return this.each(function(){var h=!1,c=!1,d=b(this),q=d.data("id"),r=d.data("step"),p=d.data("min"),g=d.data("max"),u=0,e=r.toString().split(".")[1];void 0!==e&&(u=e.length);d.append('<input id="in_'+q+'" class="range1"  type="range" style="display:none;" min="'+
p+'" max="'+g+'" step="'+r+'" value="'+p+'"><input id="out_'+q+'" class="range2" type="range" style="display:none;" min="'+p+'" max="'+g+'" step="'+r+'" value="'+g+'"><div class="dualBar"><div  class="handle1"></div><div class="rangebg"></div><div  class="handle2" ></div></div>');var k=d.find(".handle1"),l=d.find(".handle2"),f=d.find(".range1"),m=d.find(".range2"),a=d.find(".rangebg");a.css({left:k.position().left,right:l.position().left,width:l.position().left-k.position().left+"px"});var t=function(b){c=
!1;b=100*(b-d.offset().left)/d.width();0>b&&(b=0);100<b&&(b=100);k.css({left:b+"%"});k.offset().left>=l.offset().left&&l.css({left:b+"%"});var n=k.position().left,e=l.position().left;a.css({left:n,right:e,width:e-n+"px"});b=(g*b/100).toFixed(u);f.val(b);Number(f.val())>=Number(m.val())&&m.val(Number(f.val()))},v=function(b){h=!1;b=100*(b-d.offset().left)/d.width();0>b&&(b=0);100<b&&(b=100);l.css({left:b+"%"});l.offset().left<=k.offset().left&&k.css({left:b+"%"});var n=k.position().left,c=l.position().left;
0>n&&(n=0);a.css({left:n,right:c,width:c-n+"px"});b=(g*b/100).toFixed(u);m.val(b);Number(f.val())>=Number(m.val())&&f.val(Number(m.val()))};k.on("mousedown",function(a){a.preventDefault();h=!0;t(a.pageX)});l.on("mousedown",function(a){a.preventDefault();c=!0;v(a.pageX)});b(document).on("mouseup",function(a){h&&(c=h=!1,t(a.pageX));c&&(h=c=!1,v(a.pageX))});b(document).on("mousemove",function(a){h?t(a.pageX):c&&v(a.pageX)});k.on("touchstart",function(a){a.preventDefault();h=!0;t(a.pageX)});l.on("touchstart",
function(a){a.preventDefault();c=!0;v(a.originalEvent.touches[0].pageX)});b(document).on("touchend",function(a){h&&(c=h=!1,t(a.originalEvent.touches[0].pageX));c&&(h=c=!1,v(a.originalEvent.touches[0].pageX))});b(document).on("touchmove",function(a){h?t(a.originalEvent.touches[0].pageX):c&&v(a.originalEvent.touches[0].pageX)});f.on("input change",function(){var b=100*(Number(f.val())/g);k.css("left",b+"%");Number(f.val())>=Number(m.val())&&(m.val(Number(f.val())),l.css("left",b+"%"));var b=k.position().left,
c=l.position().left;0>b&&(b=0);a.css({left:b,right:c,width:c-b+"px"})});m.on("input change",function(){var b=100*(Number(m.val())/g);l.css("left",b+"%");Number(f.val())>=Number(m.val())&&(f.val(Number(m.val())),k.css("left",b+"%"));var b=k.position().left,c=l.position().left;0>b&&(b=0);a.css({left:b,right:c,width:c-b+"px"})})})}})(jQuery);
